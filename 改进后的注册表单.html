<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>用户注册</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
    <script>
        // 用户名验证
        function checkUsername() {
            var username = $("#username").val();
            if (username.length > 20) {
                $("#usernameHelp").text("用户名长度不能超过20个字符").css("color", "red");
                return false;
            } else {
                $("#usernameHelp").text("").css("color", "");
                return true;
            }
        }

        // 密码一致性验证
        function checkPassword() {
            var pass = $("#inputPassword3").val();
            var confirmPass = $("#confirmPassword").val();
            if (pass !== confirmPass) {
                $("#passwordHelp").text("两次输入的密码不一致").css("color", "red");
                return false;
            } else {
                $("#passwordHelp").text("").css("color", "");
                return true;
            }
        }

        // 表单提交验证
        $(document).ready(function () {
            $("#registerForm").submit(function (event) {
                var isValid = true;

                // 验证用户名
                if (!checkUsername()) {
                    isValid = false;
                }

                // 验证密码
                if (!checkPassword()) {
                    isValid = false;
                }

                if (!isValid) {
                    event.preventDefault();
                }
            });
        });
    </script>
</head>

<body>
    <div class="container">
        <h2 class="text-center">用户注册</h2>
        <form class="form-horizontal" role="form" action="/doReg" method="POST" id="registerForm">
            <div class="form-group">
                <label for="username" class="col-sm-4 control-label">账号*</label>
                <div class="col-sm-6">
                    <input type="text" placeholder="请填写账号" class="form-control" id="username" name="username" required
                        maxlength="20" onblur="checkUsername()" />
                    <span class="help-block" id="usernameHelp"></span>
                </div>
                <span id="exist"></span>
            </div>
            <div class="form-group">
                <label for="inputPassword3" class="col-sm-4 control-label">密码*</label>
                <div class="col-sm-6">
                    <input type="password" placeholder="请填写密码" name="pass" class="form-control" id="inputPassword3"
                        required />
                </div>
            </div>
            <div class="form-group">
                <label for="confirmPassword" class="col-sm-4 control-label">确认密码*</label>
                <div class="col-sm-6">
                    <input type="password" class="form-control" placeholder="请确认密码" id="confirmPassword"
                        name="confirmPass" required onblur="checkPassword()" />
                    <span class="help-block" id="passwordHelp"></span>
                </div>
            </div>
            <div class="form-group">
                <label for="inputPassword4" class="col-sm-4 control-label">手机*</label>
                <div class="col-sm-6">
                    <input type="tel" placeholder="请填写手机号或固定电话" required name="tel" size="11" maxlength="11"
                        class="form-control" id="inputPassword4" pattern="[0-9]{11}" />
                </div>
                <span class="col-sm-2">
                    <button type="button" class="btn btn-default">获取验证码</button>
                </span>
            </div>
            <div class="form-group">
                <label for="input5" class="col-sm-4 control-label">验证码*</label>
                <div class="col-sm-6">
                    <input type="text" class="form-control" id="input5" placeholder="请填写验证码" required name="code" />
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-4 col-sm-6">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" required name="agreement" /> 我已阅读并同意<a href="#">用户协议</a>
                        </label>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-4 col-sm-5 text-center">
                    <button type="submit" class="btn btn-default btn-block btn-primary">
                        注&nbsp;&nbsp;&nbsp;册
                    </button>
                </div>
            </div>
        </form>
    </div>
</body>

</html>