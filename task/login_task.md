# 登录功能实现步骤（任务可跟踪）

## 任务状态说明

- [ ] 未开始
- [-] 进行中
- [✅] 已完成

---

## 阶段一：数据库查询准备

- [✅ ] **任务 1.1:** 在 Navicat 中新建查询，测试登录 SQL 语句是否正确。
  - 示例：`select * from customer where username=? and pass=?`
  - 说明：使用测试数据验证 SQL 语句的查询结果

---

## 阶段二：持久层（DAO）开发与测试

- [ ] **任务 2.1:** 在 DAO 接口中添加登录方法。
  - 说明：定义方法如 `Customer login(String username, String password);`
- [ ] **任务 2.2:** 实现 DAO 接口中的登录方法。
  - 说明：使用参数化 SQL 查询用户数据，返回 Customer 对象
- [ ] **任务 2.3:** 编写 DAO 层测试代码。
  - 说明：测试登录方法能否正确查询数据并返回结果

---

## 阶段三：服务层（Service）开发与测试

- [ ] **任务 3.1:** 在 Service 接口中添加登录方法。
  - 说明：定义方法如 `Customer login(String username, String password);`
- [ ] **任务 3.2:** 实现 Service 接口中的登录方法。
  - 说明：调用 DAO 层方法，处理登录业务逻辑
- [ ] **任务 3.3:** 编写 Service 层测试代码。
  - 说明：验证登录逻辑的正确性

---

## 阶段四：前端页面与 Servlet 开发

- [ ] **任务 4.1:** 设计登录页面（login.jsp/html），包含以下表单域：
  - username（用户名）
  - password（密码）
  - 登录按钮
- [ ] **任务 4.2:** 编写 Servlet，处理登录请求。
  - 说明：创建 LoginServlet，接收表单数据并调用 Service 层方法
- [ ] **任务 4.3:** 实现登录成功/失败的处理逻辑：
  - 登录成功：将用户信息存入 session，跳转到首页
  - 登录失败：返回登录页面并显示错误信息

---

## 阶段五：登录状态管理与页面控制

- [ ] **任务 5.1:** 实现登录状态检查。
  - 说明：创建过滤器或拦截器，检查用户是否已登录
- [ ] **任务 5.2:** 更新首页显示。
  - 说明：根据登录状态显示不同的导航选项
  - 登录后显示：欢迎信息、退出链接
  - 未登录显示：登录、注册链接
- [ ] **任务 5.3:** 实现受保护页面的访问控制。
  - 说明：未登录用户访问个人中心、购物车等页面时重定向到登录页面

---

## 阶段六：功能验证

- [ ] **任务 6.1:** 测试登录功能。
  - 说明：使用正确的用户名密码测试登录
  - 说明：使用错误的用户名密码测试登录失败情况
- [ ] **任务 6.2:** 验证 session 管理。
  - 说明：确认用户信息正确存储在 session 中
  - 说明：验证退出功能是否正常清除 session
- [ ] **任务 6.3:** 测试页面访问控制。
  - 说明：验证未登录用户访问受保护页面的重定向
  - 说明：验证已登录用户访问受保护页面的正常访问

---

> 每完成一步，建议在本文件后面记录进度和遇到的问题，便于任务跟踪。
